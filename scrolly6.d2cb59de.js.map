{"version":3,"sources":["scrolly6.js"],"names":["getResponsiveImage","name","width","device","window","innerWidth","entry","jotera","desktop","joteraDesktop","mobile","joteraMobile","courtesy","photographer","vien","vienDesktop","vienMobile","malky","malkyDesktop","malkyMobile","david","davidDesktop","davidMobile","url","handleStepEnter","element","imgFrame","document","getElementById","newImageKey","getAttribute","newColor","newImage","style","backgroundImage","leftCredit","rightCredit","textContent","classList","contains","querySelectorAll","forEach","step","backgroundColor","opacity","setTimeout","body","scroller","scrollama","setup","offset","onStepEnter","response","Image","src","addEventListener","resize","requestAnimationFrame","firstVisible","querySelector"],"mappings":";;;;;;;;;;;;;;;;;AA8HA,aA9HA,IAAA,EAAA,EAAA,QAAA,2BACA,EAAA,EAAA,QAAA,8BAEA,EAAA,EAAA,QAAA,yBACA,EAAA,EAAA,QAAA,4BAEA,EAAA,EAAA,QAAA,0BACA,EAAA,EAAA,QAAA,6BAEA,EAAA,EAAA,QAAA,0BACA,EAAA,EAAA,QAAA,6BAoHA,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAlHA,SAASA,EAAmBC,GACpBC,IACAC,EADQC,OAAOC,YACG,IAAM,SAAW,UA6BnCC,EA3BW,CACfC,OAAQ,CACNC,QAASC,EADH,QAENC,OAAQC,EAFF,QAGNC,SAAU,6BACVC,aAAc,MAEhBC,KAAM,CACJN,QAASO,EADL,QAEJL,OAAQM,EAFJ,QAGJJ,SAAU,0BACVC,aAAc,6BAEhBI,MAAO,CACLT,QAASU,EADJ,QAELR,OAAQS,EAFH,QAGLP,SAAU,6BACVC,aAAc,MAEhBO,MAAO,CACLZ,QAASa,EADJ,QAELX,OAAQY,EAFH,QAGLV,SAAU,2BACVC,aAAc,8BAIKZ,GAChB,MAAA,CACLsB,IAAKjB,GAASA,EAAMH,GACpBS,SAAUN,GAASA,EAAMM,SACzBC,aAAcP,GAASA,EAAMO,cAIjC,SAASW,EAAgBC,GACjBC,IAAAA,EAAWC,SAASC,eAAe,oBACnCC,EAAcJ,EAAQK,aAAa,cACnCC,EAAWN,EAAQK,aAAa,cAEY9B,EAAAA,EAAmB6B,GAAxDG,EAALT,EAAAA,IAAeX,EAAAA,EAAAA,SAAUC,EAAAA,EAAAA,aAE7BmB,GAAYN,IACdA,EAASO,MAAMC,gBAA0BF,QAAAA,OAAAA,EAAzC,OAGIG,IAAAA,EAAaR,SAASC,eAAe,qBACrCQ,EAAcT,SAASC,eAAe,sBACxCO,IAAYA,EAAWE,YAAcxB,GAAgB,IACrDuB,IAAaA,EAAYC,YAAczB,GAAY,IAEnDR,OAAOC,YAAc,KAAOoB,EAAQa,UAAUC,SAAS,UACzDZ,SAASa,iBAAiB,SAASC,QAAQ,SAAAC,GACzCA,EAAKT,MAAMU,gBAAkB,gBAE/BlB,EAAQQ,MAAMU,gBAAkBZ,EAAcA,GAAAA,OAAAA,EAAe,MAAA,sBAI7DN,EAAQa,UAAUC,SAAS,kBAC3Bd,EAAQa,UAAUC,SAAS,kBAC3Bd,EAAQa,UAAUC,SAAS,uBAE3BZ,SAASC,eAAe,gBAAgBK,MAAMW,QAAU,GACxDC,WAAW,WACTlB,SAASmB,KAAKb,MAAMU,gBAAkBZ,GAAY,UAClDJ,SAASC,eAAe,gBAAgBK,MAAMW,QAAU,GACvD,MACMb,IACTJ,SAASmB,KAAKb,MAAMU,gBAAkBZ,GAI1C,IAAMgB,EAAWC,YAEjBD,EACGE,MAAM,CACLP,KAAM,6DACNQ,OAAQ,KAETC,YAAY,SAAAC,GACX5B,EAAgB4B,EAAS3B,WAI7B,CAAC,SAAU,OAAQ,QAAS,SAASgB,QAAQ,SAAAxC,GAC3BD,IAARuB,EAAQvB,EAAmBC,GAA3BsB,IACJA,KACU,IAAI8B,OACZC,IAAM/B,KAIdnB,OAAOmD,iBAAiB,OAAQ,WAE9BV,WAAW,WACTE,EAASS,SAETC,sBAAsB,WAEpBZ,WAAW,WACHa,IAAAA,EAAe/B,SAASgC,cAAc,8DACxCD,GACFlC,EAAgBkC,IAEjB,MAEJ,OAGLtD,OAAOmD,iBAAiB,SAAU,WAChCR,EAASS","file":"scrolly6.d2cb59de.js","sourceRoot":"../src","sourcesContent":["import joteraDesktop from './images/jotera_v2.jpg';\nimport joteraMobile from './images/jotera-phone.jpg';\n\nimport vienDesktop from './images/vien_v2.jpg';\nimport vienMobile from './images/vien-phone.jpg';\n\nimport malkyDesktop from './images/malky_v2.jpg';\nimport malkyMobile from './images/malky-phone.jpg';\n\nimport davidDesktop from './images/david_v2.jpg';\nimport davidMobile from './images/david-phone.jpg';\n\nfunction getResponsiveImage(name) {\n  const width = window.innerWidth;\n  const device = width <= 500 ? 'mobile' : 'desktop';\n\n  const imageMap = {\n    jotera: {\n      desktop: joteraDesktop,\n      mobile: joteraMobile,\n      courtesy: 'Courtesy of Jotera Webster',\n      photographer: null,\n    },\n    vien: {\n      desktop: vienDesktop,\n      mobile: vienMobile,\n      courtesy: 'Courtesy of Vien Nguyen',\n      photographer: 'Photo by Morgan Desfosses',\n    },\n    malky: {\n      desktop: malkyDesktop,\n      mobile: malkyMobile,\n      courtesy: 'Courtesy of Malky Schwartz',\n      photographer: null,\n    },\n    david: {\n      desktop: davidDesktop,\n      mobile: davidMobile,\n      courtesy: 'Courtesy of David Benson',\n      photographer: 'Photo by Morgan Desfosses',\n    },\n  };\n\n  const entry = imageMap[name];\n  return {\n    url: entry && entry[device],\n    courtesy: entry && entry.courtesy,\n    photographer: entry && entry.photographer,\n  };\n}\n\nfunction handleStepEnter(element) {\n  const imgFrame = document.getElementById(\"sticky-img-frame\");\n  const newImageKey = element.getAttribute(\"data-image\");\n  const newColor = element.getAttribute(\"data-color\");\n\n  const { url: newImage, courtesy, photographer } = getResponsiveImage(newImageKey);\n\n  if (newImage && imgFrame) {\n    imgFrame.style.backgroundImage = `url('${newImage}')`;\n  }\n\n  const leftCredit = document.getElementById(\"photo-credit-left\");\n  const rightCredit = document.getElementById(\"photo-credit-right\");\n  if (leftCredit) leftCredit.textContent = photographer || \"\";\n  if (rightCredit) rightCredit.textContent = courtesy || \"\";\n\n  if (window.innerWidth <= 500 && element.classList.contains(\"step\")) {\n    document.querySelectorAll(\".step\").forEach(step => {\n      step.style.backgroundColor = \"transparent\";\n    });\n    element.style.backgroundColor = newColor ? `${newColor}80` : \"rgba(0, 0, 0, 0.5)\";\n  }\n\n  if (\n    element.classList.contains(\"title-section\") ||\n    element.classList.contains(\"intro-section\") ||\n    element.classList.contains(\"concluding-section\")\n  ) {\n    document.getElementById(\"fade-overlay\").style.opacity = 0.4;\n    setTimeout(() => {\n      document.body.style.backgroundColor = newColor || \"#264653\";\n      document.getElementById(\"fade-overlay\").style.opacity = 0;\n    }, 200);\n  } else if (newColor) {\n    document.body.style.backgroundColor = newColor;\n  }\n}\n\nconst scroller = scrollama();\n\nscroller\n  .setup({\n    step: \".step, .title-section, .intro-section, .concluding-section\",\n    offset: 0.5,\n  })\n  .onStepEnter(response => {\n    handleStepEnter(response.element);\n  });\n\n// Preload all images\n[\"jotera\", \"vien\", \"malky\", \"david\"].forEach(name => {\n  const { url } = getResponsiveImage(name);\n  if (url) {\n    const img = new Image();\n    img.src = url;\n  }\n});\n\nwindow.addEventListener(\"load\", () => {\n  // Let layout fully settle after load\n  setTimeout(() => {\n    scroller.resize(); // Important for Scrollama to calculate triggers\n\n    requestAnimationFrame(() => {\n      // Ensure layout is painted\n      setTimeout(() => {\n        const firstVisible = document.querySelector(\".step, .title-section, .intro-section, .concluding-section\");\n        if (firstVisible) {\n          handleStepEnter(firstVisible); \n        }\n      }, 0); // Run immediately after frame paint\n    });\n  }, 300); // Wait for fonts/images/CSS to stabilize\n});\n\nwindow.addEventListener(\"resize\", () => {\n  scroller.resize();\n});\n"]}